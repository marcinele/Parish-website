{% extends "admin.html" %}

{% block head %}
	<script src="https://cdn.tiny.cloud/1/no-api-key/tinymce/5/tinymce.min.js" referrerpolicy="origin"></script>
    <script>tinymce.init({selector:'textarea.art-editor'});</script>
{% endblock %}

{% block style %}
	<link rel="stylesheet" type="text/css" href="/css/edit_article.css">
{% endblock %}

{% block content %}
	<div id="editor">
		{% if new == 1 %}
			<form action="/edit_article/new" method="POST" enctype="multipart/form-data">
		{% else %}
			<form action="/edit_article/id/{{ article.announcement_id }}" method="POST" enctype="multipart/form-data">
		{% endif %}
			<div class="input-group mb-3">
				<div class="input-group-prepend">
				    <span class="input-group-text" id="basic-addon1">Title</span>
				</div>
				<input type="text" class="form-control" placeholder="Title" aria-label="Tytuł" aria-describedby="basic-addon1" name="title" value="{{ article.title }}">
			</div>
			<div class="input-group mb-3">
				<div class="input-group-prepend">
				    <span class="input-group-text" id="basic-addon1">Subtitle</span>
				</div>
				<input type="text" class="form-control" placeholder="Subtitle" aria-label="Tytuł" aria-describedby="basic-addon1" name="subtitle" value="{{ article.subtitle }}">
			</div>
			<textarea name="content" class="art-editor">{{ article.content }}</textarea>
			<br>
			<p id="choose_img">Choose an image: </p>
  			<input type="file" name="fileToUpload" id="fileToUpload">
  			<br>
			<input class="submit_input" type="submit" value="Save">
		</form>
	</div>

	{% if saved and post and new == 2 and imgValidation >= 1 %}
		<div class="alert alert-success" role="alert">
		  Article added!
		</div>
	{% elseif saved and post and new == 2 and imgValidation == 0 %}
		<div class="alert alert-success" role="alert">
			Article added!
		</div>
		<div class="alert alert-info" role="alert">
			The image is not selected or has the wrong format (valid: .jpg, .png, .jpeg, .gif). The image has not been updated or a default image has been loaded if the article did not have one. 		</div>
	{% elseif not saved and post and new == 1 %}
		<div class="alert alert-danger" role="alert">
		  Nie udało się dodać artykułu!
		</div>
	{% elseif saved and post and imgValidation >= 1 %}
		<div class="alert alert-success" role="alert">
			Changes saved!
		</div>
	{% elseif saved and post and imgValidation == 0 %}
		<div class="alert alert-success" role="alert">
			Article added!
		</div>
		<div class="alert alert-info" role="alert">
			The image is not selected or has the wrong format (valid: .jpg, .png, .jpeg, .gif). The image has not been updated or a default image has been loaded if the article did not have one. 		</div>
	{% elseif not saved and post %}
		<div class="alert alert-danger" role="alert">
			Failed to save changes!
		</div>
	{% endif %}
{% endblock %}